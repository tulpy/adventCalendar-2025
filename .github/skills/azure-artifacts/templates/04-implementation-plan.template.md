# Step 4: Implementation Plan - {project-name}

![Step](https://img.shields.io/badge/Step-4-blue)
![Status](https://img.shields.io/badge/Status-Draft-orange)
![Agent](https://img.shields.io/badge/Agent-Bicep%20Plan-purple)

<details>
<summary><strong>üìë Table of Contents</strong></summary>

- [Overview](#overview)
- [Resource Inventory](#resource-inventory)
- [Module Structure](#module-structure)
- [Implementation Tasks](#implementation-tasks)
- [Deployment Phases](#deployment-phases)
- [Dependency Graph](#dependency-graph)
- [Runtime Flow Diagram](#runtime-flow-diagram)
- [Naming Conventions](#naming-conventions)
- [Security Configuration](#security-configuration)
- [Estimated Implementation Time](#estimated-implementation-time)
- [Approval Gate](#approval-gate)
- [References](#references)

</details>

> Generated by bicep-plan agent | {date}

| ‚¨ÖÔ∏è Previous                                                  | üìë Index            | Next ‚û°Ô∏è                                        |
| ------------------------------------------------------------ | ------------------- | ---------------------------------------------- |
| [04-governance-constraints.md](04-governance-constraints.md) | [README](README.md) | [04-preflight-check.md](04-preflight-check.md) |

## Overview

Brief description of what will be implemented.

---

## Resource Inventory

| Resource   | Type                            | SKU | AVM Status            | Dependencies | Status  |
| ---------- | ------------------------------- | --- | --------------------- | ------------ | ------- |
| Resource 1 | Microsoft.Provider/resourceType |     | ‚úÖ AVM                |              | ‚¨ú Todo |
| Resource 2 | Microsoft.Provider/resourceType |     | ‚ö†Ô∏è Requires Approval  |              | ‚¨ú Todo |
| Resource 3 | Microsoft.Provider/resourceType |     | ‚ùå No AVM (Justified) |              | ‚¨ú Todo |

---

## Module Structure

```
infra/bicep/{project-name}/
‚îú‚îÄ‚îÄ main.bicep
‚îú‚îÄ‚îÄ main.bicepparam
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ module1.bicep
‚îÇ   ‚îú‚îÄ‚îÄ module2.bicep
‚îÇ   ‚îî‚îÄ‚îÄ module3.bicep
‚îî‚îÄ‚îÄ deploy.ps1
```

| Module        | AVM Source                            | Version | Purpose   |
| ------------- | ------------------------------------- | ------- | --------- |
| module1.bicep | `br/public:avm/res/{provider}/{type}` | {x.x.x} | {purpose} |
| module2.bicep | `br/public:avm/res/{provider}/{type}` | {x.x.x} | {purpose} |
| module3.bicep | `br/public:avm/res/{provider}/{type}` | {x.x.x} | {purpose} |

---

## Implementation Tasks

### Task 1: main.bicep (Orchestration)

**Purpose**: Main entry point

**Parameters**:

- List parameters

**Variables**:

- List variables (e.g., uniqueSuffix from uniqueString(resourceGroup().id))

**Modules Called**:

1. module1.bicep
2. module2.bicep

### Task 2: modules/module1.bicep

**Resources**:

- List resources

**Outputs**:

- List outputs

### Task 3: modules/module2.bicep

**Resources**:

- List resources

**Key Configuration**:

```bicep
Example configuration snippet
```

**Outputs**:

- List outputs

### Task N: deploy.ps1 (Deployment Script)

**Features**:

- Parameter validation
- Bicep lint/build verification
- What-If preview
- Deployment execution
- Output display

---

## Deployment Phases

> Deployment strategy: **{Phased|Single}** (chosen during planning)

### Phase 1: Foundation

| Order | Module | Resources | Validation |
| ----- | ------ | --------- | ---------- |
| 1     | ...    | ...       | ...        |

**Approval Gate**: Verify foundation resources before proceeding.

### Phase 2: Security & Data

| Order | Module | Resources | Validation |
| ----- | ------ | --------- | ---------- |
| 2     | ...    | ...       | ...        |

**Approval Gate**: Verify security controls before CDE resources.

### Phase N: ...

_(Repeat for each phase)_

### Phase Summary

| Phase | Resources | Est. Deploy Time | Approval Gate |
| ----- | --------- | ---------------- | ------------- |
| 1     | X         | X min            | ‚úÖ            |
| 2     | X         | X min            | ‚úÖ            |
| N     | X         | X min            | ‚úÖ            |

---

## Dependency Graph

![Module Dependency Graph](./04-dependency-diagram.png)

Source: [04-dependency-diagram.py](./04-dependency-diagram.py)

> Map each node label to an Implementation Task heading in the task table below.

---

## Runtime Flow Diagram

![Runtime Flow Diagram](./04-runtime-diagram.png)

Source: [04-runtime-diagram.py](./04-runtime-diagram.py)

> Keep this runtime view focused on request/auth/secret/event/telemetry paths only.

---

## Naming Conventions

| Resource       | Pattern                  | Example            | Generated Name |
| -------------- | ------------------------ | ------------------ | -------------- |
| Resource Group | rg-{project}-{env}       | rg-project-dev     | {actual name}  |
| Resource 1     | {prefix}-{project}-{env} | prefix-project-dev | {actual name}  |

---

## Security Configuration

| Resource   | Security Setting | Value |
| ---------- | ---------------- | ----- |
| Resource 1 | Setting 1        |       |
| Resource 2 | Setting 2        |       |

---

## Estimated Implementation Time

| Task          | Estimated Duration |
| ------------- | ------------------ |
| Bicep modules | X minutes          |
| Testing       | X minutes          |
| Deployment    | X minutes          |
| **Total**     | **~X minutes**     |

---

## Approval Gate

> [!IMPORTANT]
> **üìã Implementation Plan Ready**
>
> | Metric                           | Value   |
> | -------------------------------- | ------- |
> | Azure resources planned          | {X}     |
> | Bicep modules to create          | {X}     |
> | Governance constraints addressed | ‚úÖ / ‚ùå |
> | CAF naming conventions applied   | ‚úÖ / ‚ùå |
>
> - [ ] **Approved** ‚Äî proceed to bicep-code
> - **Approver**: **\*\***\_\_\_**\*\***
> - **Date**: **\*\***\_\_\_**\*\***
>
> Reply **"approve"** to proceed to bicep-code, or provide feedback.

---

## References

> [!NOTE]
> üìö The following Microsoft Learn resources inform this implementation.

| Topic                  | Link                                                                                                                          |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| Azure Verified Modules | [AVM Index](https://aka.ms/avm/index)                                                                                         |
| Bicep Best Practices   | [Documentation](https://learn.microsoft.com/azure/azure-resource-manager/bicep/best-practices)                                |
| CAF Naming Conventions | [Naming Rules](https://learn.microsoft.com/azure/cloud-adoption-framework/ready/azure-best-practices/resource-naming)         |
| Resource Abbreviations | [Abbreviations](https://learn.microsoft.com/azure/cloud-adoption-framework/ready/azure-best-practices/resource-abbreviations) |

---

_Plan generated by bicep-plan agent following Azure Well-Architected Framework guidelines._

---

| ‚¨ÖÔ∏è [04-governance-constraints.md](04-governance-constraints.md) | üè† [Project Index](README.md) | ‚û°Ô∏è [04-preflight-check.md](04-preflight-check.md) |
| --------------------------------------------------------------- | ----------------------------- | ------------------------------------------------- |
