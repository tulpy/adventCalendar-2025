name: Bug Report
description: Report an issue with templates, scripts, or documentation
title: "[Bug]: "
labels: ["bug"]
assignees: []
body:
  - type: markdown
    attributes:
      value: |
        ## üêõ Bug Report

        Found an issue with Bicep templates, PowerShell scripts, agent definitions,
        or documentation? Report it here!

  - type: dropdown
    id: area
    attributes:
      label: Affected Area
      description: What part of the repository is affected?
      options:
        - Bicep templates (infra/bicep/)
        - PowerShell scripts
        - Agent definitions (.github/agents/)
        - Documentation (docs/, README files)
        - GitHub Actions workflows
        - MCP Server (mcp/azure-pricing-mcp/)
        - Devcontainer configuration
        - Other
    validations:
      required: true

  - type: input
    id: file-path
    attributes:
      label: Affected File(s)
      description: Path to the affected file(s)
      placeholder: "infra/bicep/contoso-patient-portal/main.bicep"
    validations:
      required: false

  - type: textarea
    id: description
    attributes:
      label: Bug Description
      description: What's the issue? What did you expect vs what happened?
      placeholder: |
        **Expected:** Bicep deployment completes successfully
        **Actual:** Deployment fails with error "Resource name too long"

        Error message:
        ```
        Error BCP036: The property "name" expected a value of type...
        ```
    validations:
      required: true

  - type: textarea
    id: reproduction
    attributes:
      label: Steps to Reproduce
      description: How can we reproduce this issue?
      placeholder: |
        1. Open devcontainer
        2. Navigate to `infra/bicep/scenario-name/`
        3. Run `bicep build main.bicep`
        4. Observe error
    validations:
      required: true

  - type: dropdown
    id: environment
    attributes:
      label: Environment
      description: Where did you encounter this issue?
      options:
        - Devcontainer (recommended setup)
        - Local development (Windows)
        - Local development (macOS)
        - Local development (Linux)
        - GitHub Actions CI
        - Azure deployment
    validations:
      required: true

  - type: textarea
    id: versions
    attributes:
      label: Tool Versions
      description: What versions of tools are you using?
      placeholder: |
        - Bicep CLI: 0.24.x
        - Azure CLI: 2.55.x
        - Node.js: 20.x
        - PowerShell: 7.4.x
      render: markdown
    validations:
      required: false

  - type: textarea
    id: workaround
    attributes:
      label: Workaround
      description: Have you found a workaround?
      placeholder: "Manually shortened the resource name to 24 characters"
    validations:
      required: false

  - type: dropdown
    id: severity
    attributes:
      label: Severity
      description: How severe is this issue?
      options:
        - Low (cosmetic, minor inconvenience)
        - Medium (workaround available, affects usability)
        - High (blocks deployment/demo, no workaround)
        - Critical (security issue, data loss risk)
    validations:
      required: true

  - type: checkboxes
    id: checklist
    attributes:
      label: Pre-submission Checklist
      options:
        - label: I've searched existing issues to avoid duplicates
          required: true
        - label: I'm using the latest version of the repository (main branch)
          required: true
        - label: I've included relevant error messages and logs
          required: true
