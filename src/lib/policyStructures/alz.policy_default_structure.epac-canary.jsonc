{
  "$schema": "https://raw.githubusercontent.com/Azure/enterprise-azure-policy-as-code/main/Schemas/policy-structure-schema.json",
  "managementGroupNameMappings": {
    "alz": {
      "management_group_function": "Azure Landing Zones - Canary",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary"
    },
    "platform": {
      "management_group_function": "Platform",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-platform"
    },
    "landingzones": {
      "management_group_function": "Landing zones",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-landingzones"
    },
    "corp": {
      "management_group_function": "Corp",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-lz-corp"
    },
    "online": {
      "management_group_function": "Online",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-lz-online"
    },
    "sandbox": {
      "management_group_function": "Sandbox",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-lz-sandbox"
    },
    "security": {
      "management_group_function": "Security",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-platform-security"
    },
    "management": {
      "management_group_function": "Management",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-platform-management"
    },
    "connectivity": {
      "management_group_function": "Connectivity",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-platform-connectivity"
    },
    "identity": {
      "management_group_function": "Identity",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-platform-identity"
    },
    "decommissioned": {
      "management_group_function": "Decommissioned",
      "value": "/providers/Microsoft.Management/managementGroups/mg-alz-canary-decommissioned"
    }
  },
  "enforcementMode": "Default",
  "defaultParameterValues": {
    "private_dns_zone_subscription_id": [
      {
        "description": "The subscription id that hosts the private link DNS zones.",
        "parameters": {
          "parameter_name": "dnsZoneSubscriptionId",
          "value": null
        },
        "policy_assignment_name": "Deploy-Private-DNS-Zones"
      }
    ],
    "private_dns_zone_resource_group_name": [
      {
        "description": "The resource group name that hosts the private link DNS zones.",
        "parameters": {
          "parameter_name": "dnsZoneResourceGroupName",
          "value": null
        },
        "policy_assignment_name": "Deploy-Private-DNS-Zones"
      }
    ],
    "private_dns_zone_region": [
      {
        "description": "The region short name (e.g. `westus`) that should be used for the region specific private link DNS zones.",
        "parameters": {
          "parameter_name": "dnsZoneRegion",
          "value": null
        },
        "policy_assignment_name": "Deploy-Private-DNS-Zones"
      }
    ],
    "ama_user_assigned_managed_identity_id": [
      {
        "description": "The user assigned managed identity id that should be used for the AMA deployment.",
        "parameters": {
          "parameter_name": "userAssignedIdentityResourceId",
          "value": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/placeholder/providers/Microsoft.ManagedIdentity/userAssignedIdentities/placeholder"
        },
        "policy_assignment_name": [
          "Deploy-VM-ChangeTrack",
          "Deploy-VMSS-ChangeTrack",
          "Deploy-VM-Monitoring",
          "Deploy-VMSS-Monitoring",
          "Deploy-MDFC-DefSQL-AMA"
        ]
      }
    ],
    "ama_user_assigned_managed_identity_name": [
      {
        "description": "The user assigned managed identity name that is used for the deny action policy to prevent the accidental deletion of the AMA identity.",
        "parameters": {
          "parameter_name": "resourceName",
          "value": "defaultString3"
        },
        "policy_assignment_name": "DenyAction-DeleteUAMIAMA"
      }
    ],
    "ama_vm_insights_data_collection_rule_id": [
      {
        "description": "The data collection rule id that should be used for the VM Insights deployment.",
        "parameters": {
          "parameter_name": "dcrResourceId",
          "value": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/placeholder/providers/Microsoft.Insights/dataCollectionRules/placeholder"
        },
        "policy_assignment_name": [
          "Deploy-VM-Monitoring",
          "Deploy-VMSS-Monitoring",
          "Deploy-vmHybr-Monitoring"
        ]
      }
    ],
    "ama_mdfc_sql_data_collection_rule_id": [
      {
        "description": "The data collection rule id that should be used for the SQL MDFC deployment.",
        "parameters": {
          "parameter_name": "dcrResourceId",
          "value": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/placeholder/providers/Microsoft.Insights/dataCollectionRules/placeholder"
        },
        "policy_assignment_name": "Deploy-MDFC-DefSQL-AMA"
      }
    ],
    "ama_change_tracking_data_collection_rule_id": [
      {
        "description": "The data collection rule id that should be used for the change tracking deployment.",
        "parameters": {
          "parameter_name": "dcrResourceId",
          "value": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/placeholder/providers/Microsoft.Insights/dataCollectionRules/placeholder"
        },
        "policy_assignment_name": [
          "Deploy-VM-ChangeTrack",
          "Deploy-vmArc-ChangeTrack",
          "Deploy-VMSS-ChangeTrack"
        ]
      }
    ],
    "ddos_protection_plan_id": [
      {
        "description": "The DDoS protection plan id that should be used for the DDoS protection plan deployment. If this is invalid or you do not use DDoS protection, make sure to change the enforcement mode of the Enable-DDoS-VNET policy to 'DoNotEnforce'.",
        "parameters": {
          "parameter_name": "ddosPlan",
          "value": "/subscriptions/5cb7efe0-67af-4723-ab35-0f2b42a85839/resourceGroups/arg-aue-plat-conn-networking/providers/Microsoft.Network/ddosProtectionPlans/ddos-aue-plat-conn"
        },
        "policy_assignment_name": "Enable-DDoS-VNET"
      }
    ],
    "log_analytics_workspace_id_0": [
      {
        "description": "The Log Analytics workspace id that should be used for centralized log collection.",
        "parameters": {
          "parameter_name": "logAnalytics",
          "value": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/placeholder/providers/Microsoft.OperationalInsights/workspaces/placeholder-la"
        },
        "policy_assignment_name": [
          "Deploy-AzActivity-Log",
          "Deploy-Diag-LogsCat",
          "Deploy-MDFC-Config-H224"
        ]
      }
    ],
    "log_analytics_workspace_id_1": [
      {
        "description": "The Log Analytics workspace id that should be used for centralized log collection.",
        "parameters": {
          "parameter_name": "logAnalyticsWorkspaceId",
          "value": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/placeholder/providers/Microsoft.OperationalInsights/workspaces/placeholder-la"
        },
        "policy_assignment_name": "Deploy-AzSqlDb-Auditing"
      }
    ],
    "log_analytics_workspace_id_2": [
      {
        "description": "The Log Analytics workspace id that should be used for centralized log collection.",
        "parameters": {
          "parameter_name": "userWorkspaceResourceId",
          "value": "/subscriptions/00000000-0000-0000-0000-000000000000/resourcegroups/placeholder/providers/Microsoft.OperationalInsights/workspaces/placeholder-la"
        },
        "policy_assignment_name": "Deploy-MDFC-DefSQL-AMA"
      }
    ],
    "ama_mdfc_sql_workspace_id": [
      {
        "description": "Workspace Id of the Log Analytics workspace destination for the Data Collection Rule.",
        "parameters": {
          "parameter_name": "userWorkspaceId",
          "value": null
        },
        "policy_assignment_name": "Deploy-MDFC-DefSQL-AMA"
      }
    ],
    "ama_mdfc_sql_workspace_region": [
      {
        "description": "The region short name (e.g. westus) that should be used for the Log Analytics workspace for the SQL MDFC deployment.",
        "parameters": {
          "parameter_name": "workspaceRegion",
          "value": "northeurope"
        },
        "policy_assignment_name": "Deploy-MDFC-DefSQL-AMA"
      }
    ],
    "mdfc_email_security_contact": [
      {
        "description": "Email address for Microsoft Defender for Cloud alerts.",
        "parameters": {
          "parameter_name": "emailSecurityContact",
          "value": "security_contact@replace_me"
        },
        "policy_assignment_name": "Deploy-MDFC-Config-H224"
      }
    ],
    "mdfc_export_resource_group_name": [
      {
        "description": "Resource Group name for the export to Log Analytics workspace configuration",
        "parameters": {
          "parameter_name": "ascExportResourceGroupName",
          "value": "/providers/Microsoft.Management/managementGroups/placeholder-asc-export"
        },
        "policy_assignment_name": "Deploy-MDFC-Config-H224"
      }
    ],
    "mdfc_export_resource_group_location": [
      {
        "description": "Resource Group location for the export to Log Analytics workspace configuration",
        "parameters": {
          "parameter_name": "ascExportResourceGroupLocation",
          "value": "${default_location}"
        },
        "policy_assignment_name": "Deploy-MDFC-Config-H224"
      }
    ]
  },
  "enforceGuardrails": {
    "deployments": [
      {
        "policy_set_names": [
          "Enforce-Encryption-CMK_20250218",
          "Enforce-Guardrails-APIM",
          "Enforce-Guardrails-AppServices",
          "Enforce-Guardrails-Automation",
          "Enforce-Guardrails-BotService",
          "Enforce-Guardrails-CognitiveServices",
          "Enforce-Guardrails-Compute",
          "Enforce-Guardrails-ContainerApps",
          "Enforce-Guardrails-ContainerInstance",
          "Enforce-Guardrails-ContainerRegistry",
          "Enforce-Guardrails-CosmosDb",
          "Enforce-Guardrails-DataExplorer",
          "Enforce-Guardrails-DataFactory",
          "Enforce-Guardrails-EventGrid",
          "Enforce-Guardrails-EventHub",
          "Enforce-Guardrails-KeyVault-Sup",
          "Enforce-Guardrails-KeyVault",
          "Enforce-Guardrails-Kubernetes",
          "Enforce-Guardrails-MachineLearning",
          "Enforce-Guardrails-MySQL",
          "Enforce-Guardrails-Network_20250326",
          "Enforce-Guardrails-Network",
          "Enforce-Guardrails-OpenAI",
          "Enforce-Guardrails-PostgreSQL",
          "Enforce-Guardrails-ServiceBus",
          "Enforce-Guardrails-SQL",
          "Enforce-Guardrails-Storage",
          "Enforce-Guardrails-Synapse",
          "Enforce-Guardrails-VirtualDesktop"
        ],
        "scope": [
          "/providers/Microsoft.Management/managementGroups/landingzones",
          "/providers/Microsoft.Management/managementGroups/platform"
        ]
      }
    ]
  }
}
